const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MdEditor-BItgetc9.js","assets/element-plus-qgwGTzxg.js","assets/element-plus-DJ7jyVtF.css","assets/index-C7UPnry-.js","assets/utils-DWTWu0JZ.js","assets/mainAppView-035_X34S.js","assets/mainAppView-CTriU59l.css","assets/MdEditor-9ZFswB37.css","assets/CodemirrorEditor-BOtTYmAB.js","assets/CodemirrorEditor-DsP6y13a.css"])))=>i.map(i=>d[i]);
import{a as R,s as B,_ as p,d as S}from"./mainAppView-035_X34S.js";import{d as V,r as o,Y as F,w as I,C as N,D as f,H as T,J as y,N as x,Q as A,u as D,U as M,B as E,ae as O}from"./element-plus-qgwGTzxg.js";import"./utils-DWTWu0JZ.js";const P={class:"local-file-editor file-editor"},L=V({__name:"NativeFileEditor",props:{id:{type:String,required:!0}},setup(m){const u=R(),{tabs:g}=B(u),c=o(!1),k=m,d=o(null),s=o(""),_=o(!0),r=o(!0);let a=null;const n=o(null);let v;F(async()=>{const e=g.value.find(l=>l.id===k.id);a=e==null?void 0:e.data.file;const t=await a.getFile();s.value=t.name;const i=s.value.split(".").pop();_.value=i==="md"||i==="markdown",_.value?v=E(()=>p(()=>import("./MdEditor-BItgetc9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))):v=E(()=>p(()=>import("./CodemirrorEditor-BOtTYmAB.js").then(l=>l.M),__vite__mapDeps([8,5,1,2,4,6,9]))),d.value=t,s.value=a.name}),I(()=>r.value,e=>{const t=s.value;e?u.titleBarText=t:u.titleBarText=t+" *"});const w=async()=>{var e;console.log("editorReady"),(e=d.value)==null||e.text().then(t=>{n.value&&(n.value.setContent(t,!0),c.value=!0)})},h=async()=>{if(!n.value)return;const e=n.value.getContent();a==null||a.createWritable().then(t=>{t.write(e),t.close()}),O({message:"文章保存成功",grouping:!0,type:"success"}),r.value=!0},C=async e=>(console.warn("请求重命名[本地文件暂不支持]：",e),!1);return(e,t)=>{const i=M;return f(),N("div",P,[d.value?T((f(),x(D(v),{key:0,editor:m.id,class:"editor","file-name":s.value,modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),editorReady:w,"save-file":h,"rename-file":C,ref_key:"EditorInstanceRef",ref:n},null,8,["editor","file-name","modelValue"])),[[A,c.value]]):y("",!0),c.value?y("",!0):(f(),x(i,{key:1,rows:7,animated:"",style:{margin:"auto","max-width":"800px",padding:"40px"}}))])}}}),q=S(L,[["__scopeId","data-v-f7dd0252"]]);export{q as default};
